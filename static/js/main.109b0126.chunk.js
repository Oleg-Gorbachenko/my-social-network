(this["webpackJsonpmy-social-network"]=this["webpackJsonpmy-social-network"]||[]).push([[0],{11:function(e,t,a){e.exports={nav:"Navbar_nav__17fhq",item:"Navbar_item__Lerdi",active:"Navbar_active__1NBPV"}},12:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return d}));var n=a(55),r=a(0),c=a.n(r),o=a(91),u=a(33),s=a.n(u),i=["input","meta"],l=["input","meta"],f=function(e){var t=e.meta,a=t.touched,n=t.error,r=e.children,o=a&&n;return c.a.createElement("div",{className:"".concat(s.a.formControl," ").concat(o?s.a.error:"")},c.a.createElement("div",null,r),o&&c.a.createElement("span",null,n))},m=function(e){var t=e.input,a=(e.meta,Object(n.a)(e,i));return c.a.createElement(f,e,c.a.createElement("textarea",Object.assign({},t,a)))},p=function(e){var t=e.input,a=(e.meta,Object(n.a)(e,l));return c.a.createElement(f,e,c.a.createElement("input",Object.assign({},t,a)))},d=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return c.a.createElement("div",null,c.a.createElement(o.a,Object.assign({placeholder:e,name:t,validate:a,component:n},r))," ",u)}},126:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return s}));var n=a(46),r=a(3),c=a(21),o={dialogs:[{id:Object(c.a)(),name:"Andrey"},{id:Object(c.a)(),name:"Oleg"},{id:Object(c.a)(),name:"Maks"},{id:Object(c.a)(),name:"Anton"},{id:Object(c.a)(),name:"Viktoriya"},{id:Object(c.a)(),name:"Dmitry"}],messages:[{id:Object(c.a)(),message:"Hi!"},{id:Object(c.a)(),message:"How are you!"},{id:Object(c.a)(),message:"Yo!"},{id:Object(c.a)(),message:"I`m fine!"}]},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialogs/ADD-MESSAGE":return Object(r.a)(Object(r.a)({},e),{},{messages:[].concat(Object(n.a)(e.messages),[{id:Object(c.a)(),message:t.newMessageText}])});default:return e}},s=function(e){return{type:"dialogs/ADD-MESSAGE",newMessageText:e}}},129:function(e,t,a){"use strict";a.d(t,"f",(function(){return m})),a.d(t,"d",(function(){return v})),a.d(t,"c",(function(){return g})),a.d(t,"b",(function(){return O})),a.d(t,"a",(function(){return j})),a.d(t,"e",(function(){return P}));var n=a(7),r=a.n(n),c=a(13),o=a(46),u=a(3),s=a(14),i=function(e,t,a,n){return e.map((function(e){return e[a]===t?Object(u.a)(Object(u.a)({},e),n):e}))},l="users/FOLLOW",f={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(u.a)(Object(u.a)({},e),{},{users:i(e.users,t.userId,"id",{followed:!0})});case"users/UNFOLLOW":return Object(u.a)(Object(u.a)({},e),{},{users:i(e.users,t.userId,"id",{followed:!1})});case"users/SET_USERS":return Object(u.a)(Object(u.a)({},e),{},{users:t.users});case"users/SET_CURRENT_PAGE":return Object(u.a)(Object(u.a)({},e),{},{currentPage:t.currentPage});case"users/SET_TOTAL_USERS_COUNT":return Object(u.a)(Object(u.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"users/TOGGLE_IS_FETCHING":return Object(u.a)(Object(u.a)({},e),{},{isFetching:t.isFetching});case"users/TOGGLE_IS_FOLLOWING_PROGRESS":return Object(u.a)(Object(u.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(o.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},p=function(e){return{type:l,userId:e}},d=function(e){return{type:"users/UNFOLLOW",userId:e}},b=function(e){return{type:"users/SET_USERS",users:e}},E=function(e){return{type:"users/SET_CURRENT_PAGE",currentPage:e}},h=function(e){return{type:"users/TOGGLE_IS_FETCHING",isFetching:e}},v=function(e,t){return{type:"users/TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},g=function(e,t){return function(){var a=Object(c.a)(r.a.mark((function a(n){var c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(h(!0)),n(E(e)),a.next=4,s.d.getUsers(e,t);case 4:c=a.sent,n(h(!1)),n(b(c.items)),n({type:"users/SET_TOTAL_USERS_COUNT",totalUsersCount:c.totalCount});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},O=function(e,t){return function(){var a=Object(c.a)(r.a.mark((function a(n){var c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(E(e)),n(h(!0)),a.next=4,s.d.getUsers(e,t);case 4:c=a.sent,n(h(!1)),n(b(c.items));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},_=function(){var e=Object(c.a)(r.a.mark((function e(t,a,n,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(v(!0,a)),e.next=3,n(a);case 3:0===e.sent.resultCode&&t(c(a)),t(v(!1,a));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),j=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:_(a,e,s.d.followed.bind(s.d),p);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:_(a,e,s.d.unfollowed.bind(s.d),d);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},130:function(e,t,a){e.exports=a.p+"static/media/preloader.cac6f4f6.gif"},131:function(e,t,a){e.exports={wrapper:"Preloader_wrapper__Oyctl"}},135:function(e,t,a){e.exports={wrapper:"Profile_wrapper__24e3e"}},14:function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return s}));var n=a(134),r=a.n(n).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"5b285e4d-b0fc-4ae5-ae16-e98b5fa6e386"}}),c={getUsers:function(e,t){return r.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},followed:function(e){return r.post("follow/".concat(e)).then((function(e){return e.data}))},unfollowed:function(e){return r.delete("follow/".concat(e)).then((function(e){return e.data}))},getProfile:function(e){return console.warn("Obsolete method. Please use profileApI object."),o.getProfile(e)}},o={getProfile:function(e){return r.get("profile/".concat(e))},getStatus:function(e){return r.get("profile/status/".concat(e))},updateStatus:function(e){return r.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),r.put("profile/photo",t,{headers:{"Content-Type":"multipart / form - data"}})},saveProfile:function(e){return r.put("profile",e)}},u={me:function(){return r.get("auth/me")},login:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n})},logout:function(){return r.delete("auth/login")}},s={getCaptchaUrl:function(){return r.get("security/get-captcha-url")}}},163:function(e,t,a){e.exports=a(293)},164:function(e,t,a){},169:function(e,t,a){},24:function(e,t,a){e.exports={wrapper:"ProfileInfo_wrapper__2wcRW",mainBlock:"ProfileInfo_mainBlock__3k25X",userProfile:"ProfileInfo_userProfile__1Mvvz",userPicture:"ProfileInfo_userPicture__3IlkG",userSpec:"ProfileInfo_userSpec__3msJb",descriptionBlock:"ProfileInfo_descriptionBlock__2nTKU",mainPhoto:"ProfileInfo_mainPhoto__1pvs_",fullName:"ProfileInfo_fullName__1HLw6",contact:"ProfileInfo_contact__30oj9"}},29:function(e,t,a){e.exports={header:"Header_header__1vKf1",container:"Header_container__xIG5l",wrapper:"Header_wrapper__3OZYt",loginBlock:"Header_loginBlock__1hfPO",avatar:"Header_avatar__vE94-",userName:"Header_userName__TIc2Z",logout:"Header_logout__1ssRS"}},293:function(e,t,a){"use strict";a.r(t);a(164);var n=function(e){e&&e instanceof Function&&a.e(5).then(a.bind(null,298)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))},r=a(70),c=a.n(r),o=a(0),u=a.n(o),s=a(36),i=a(37),l=a(41),f=a(40),m=(a(169),a(5)),p=a(18),d=function(){return u.a.createElement("div",null,"News")},b=function(){return u.a.createElement("div",null,"Music")},E=function(){return u.a.createElement("div",null,"Settings")},h=a(19),v=a(24),g=a.n(v),O=a(52),_=function(e){var t=Object(o.useState)(!1),a=Object(h.a)(t,2),n=a[0],r=a[1],c=Object(o.useState)(e.status),s=Object(h.a)(c,2),i=s[0],l=s[1];Object(o.useEffect)((function(){l(e.status)}),[e.status]);return u.a.createElement(u.a.Fragment,null,n?u.a.createElement("div",null,u.a.createElement("input",{onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),e.updateStatus(i)},value:i})):u.a.createElement("div",null,u.a.createElement("b",null,"My status: "),u.a.createElement("span",{onDoubleClick:function(){r(!0)}},e.status||"Change your status")))},j=a(38),P=a.n(j),S=a(12),w=a(127),y=a(9),N=a(33),k=a.n(N),C=Object(w.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,a=e.error,n=Object(y.d)((function(e){return e.profilePage.profile}));return u.a.createElement("form",{onSubmit:t},u.a.createElement("button",{onClick:function(){}},"save"),a&&u.a.createElement("div",{className:k.a.formSummaryError},a),u.a.createElement("div",null,u.a.createElement("b",null,"Full name: ")," ",Object(S.c)("Full name","fullName",[],S.a)),u.a.createElement("div",null,u.a.createElement("b",null,"Looking for a job: "),Object(S.c)("","lookingForAJob",[],S.a,{type:"checkbox"})),u.a.createElement("div",null,u.a.createElement("b",null,"My professional skills: ")),Object(S.c)("My professional skills","lookingForAJobDescription",[],S.b),u.a.createElement("div",null,u.a.createElement("b",null,"About Me: "),Object(S.c)("AboutMe","aboutMe",[],S.b)),u.a.createElement("div",null,u.a.createElement("b",null,"Contacts : ")," ",Object.keys(n.contacts).map((function(e){return u.a.createElement("div",{key:e},u.a.createElement("b",null,e,":",Object(S.c)(e,"contacts."+e,[],S.a)))}))))})),T=a(39),A=function(e){var t=e.profile,a=e.status,n=e.updateStatus,r=e.isOwner,c=e.savePhoto,s=e.saveProfile,i=Object(y.d)((function(e){return e.profilePage.profile.fullName})),l=Object(o.useState)(!1),f=Object(h.a)(l,2),m=f[0],p=f[1];if(!t)return u.a.createElement(O.a,null);return u.a.createElement("div",{className:g.a.wrapper},u.a.createElement("div",{className:g.a.mainBlock},u.a.createElement("div",{className:g.a.userProfile},u.a.createElement("div",{className:g.a.userPicture},u.a.createElement("img",{src:t.photos.large||P.a,className:g.a.mainPhoto,alt:"photo"}))),r&&u.a.createElement("div",{className:g.a.userSpec},u.a.createElement("input",{type:"file",onChange:function(e){e.target.files&&c(e.target.files[0])}})),u.a.createElement("h1",{className:g.a.fullName},i),u.a.createElement(_,{status:a,updateStatus:n})),m?u.a.createElement(C,{onSubmit:function(e){s(e).then((function(){p(!1)}))},initialValues:t}):u.a.createElement(I,{profile:t,isOwner:r,goToEditMode:function(){return p(!0)}}))},x=function(e){return u.a.createElement("div",{className:g.a.contact},u.a.createElement("b",null,e.contactTitle),": ",e.contactValue)},I=function(e){var t=e.profile,a=e.isOwner,n=e.goToEditMode;return u.a.createElement("div",{className:g.a.descriptionBlock},a&&u.a.createElement(T.a,{onClick:n,name:"edit"}),u.a.createElement("div",null,u.a.createElement("b",null,"About Me: ")," ",t.aboutMe),u.a.createElement("div",null,u.a.createElement("b",null,"Looking for a job: ")," ",t.lookingForAJob?"yes":"no"),t.lookingForAJob&&u.a.createElement("div",null,u.a.createElement("b",null,"My professional skills: ")," ",t.lookingForAJobDescription),u.a.createElement("div",null,u.a.createElement("b",null,"Contacts"),": ",Object.keys(t.contacts).map((function(e){return u.a.createElement(x,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))))},U=a(7),L=a.n(U),F=a(13),M=a(46),G=a(3),R=a(21),D=a(14),H=a(25),B="profile/ADD-POST",V={posts:[{id:Object(R.a)(),message:"How are you!",likesCount:15},{id:Object(R.a)(),message:"It's my first post",likesCount:26}],profile:{aboutMe:"",contacts:{},lookingForAJob:!1,lookingForAJobDescription:"",fullName:"",userId:1,photos:{}},status:"",myPhoto:P.a},z=function(e){return{type:"profile/SET_STATUS",status:e}},J=function(e){return function(){var t=Object(F.a)(L.a.mark((function t(a,n){var r,c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.userId,t.next=3,D.d.getProfile(e);case 3:c=t.sent,a({type:"profile/SET_USER_PROFILE",profile:c.data}),r&&r===+e&&a({type:"profile/SET_MY_PHOTO",photos:c.data.photos.large});case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},W=a(60),Y=a.n(W),K=a(48),Z=a.n(K),q=function(e){var t=Object(y.d)((function(e){return e.profilePage.myPhoto})),a=Object(y.d)((function(e){return e.auth.login}));return u.a.createElement("div",{className:Z.a.container},u.a.createElement("div",{className:Z.a.header},u.a.createElement("img",{className:Z.a.avatar,src:t,alt:"avatar"}),u.a.createElement("div",null,a)),u.a.createElement("div",{className:Z.a.main},e.message),u.a.createElement("div",{className:Z.a.footer},u.a.createElement("span",null,"Likes: "),e.likesCount))},X=a(91),Q=a(34),$=Object(o.memo)((function(e){var t=e.profilePage.posts.map((function(e){return u.a.createElement(q,{key:e.id,message:e.message,likesCount:e.likesCount,id:e.id})}));return u.a.createElement("div",{className:Y.a.postBlock},u.a.createElement("h2",null,"My posts"),u.a.createElement("div",null,u.a.createElement(ae,{onSubmit:function(t){e.addPost(t.newPostText)}})),u.a.createElement("div",{className:Y.a.posts},t))})),ee=Object(Q.a)(10),te=Object(Q.b)(2),ae=Object(w.a)({form:"dialogAddMessageForm"})((function(e){return u.a.createElement("form",{onSubmit:e.handleSubmit},u.a.createElement("div",{className:Y.a.formWrapper},u.a.createElement(X.a,{component:S.b,name:"newPostText",placeholder:"Enter your message",validate:[Q.c,ee,te]})),u.a.createElement("div",{className:Y.a.button},u.a.createElement(T.a,{name:"Add post"})))})),ne=Object(y.b)((function(e){return{profilePage:e.profilePage}}),(function(e){return{addPost:function(t){e(function(e){return{type:B,newPostText:e}}(t))}}}))($),re=a(135),ce=a.n(re),oe=function(e){return u.a.createElement("div",{className:ce.a.wrapper},u.a.createElement(A,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),u.a.createElement(ne,null))},ue=a(10),se=function(e){Object(l.a)(a,e);var t=Object(f.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"refreshProfile",value:function(){var e=this.props.router.params.userId;e&&"22956"!==e||(this.props.getUsersProfile(e),this.props.router.navigate("/login")),this.props.getUsersProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.router.params.userId!=e.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){var e;return e=this.props.isAuth&&this.props.userId==this.props.router.params.userId,u.a.createElement(oe,Object.assign({},this.props,{isOwner:e,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),a}(u.a.Component),ie=Object(ue.d)(Object(y.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,userId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUsersProfile:J,getStatus:function(e){return function(){var t=Object(F.a)(L.a.mark((function t(a){var n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.b.getStatus(e);case 2:n=t.sent,a(z(n.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(F.a)(L.a.mark((function t(a){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&a(z(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(F.a)(L.a.mark((function t(a){var n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.b.savePhoto(e);case 2:0===(n=t.sent).data.resultCode&&a({type:"profile/SAVE_PHOTO_SUCCESS",photos:n.data.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(F.a)(L.a.mark((function t(a,n){var r,c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.userId,t.next=3,D.b.saveProfile(e);case 3:if(0!==(c=t.sent).data.resultCode){t.next=9;break}return t.next=7,a(J(r));case 7:t.next=11;break;case 9:return a(Object(H.a)("edit-profile",{_error:c.data.messages[0]})),t.abrupt("return",Promise.reject(c.data.messages[0]));case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),(function(e){return function(t){var a=Object(m.f)(),n=Object(m.g)(),r=Object(m.h)();return u.a.createElement(e,Object.assign({},t,{router:{location:a,navigate:n,params:r}}))}}))(se),le=a(29),fe=a.n(le),me=a(11),pe=a.n(me),de=function(){return u.a.createElement("nav",{className:pe.a.nav},u.a.createElement("div",{className:pe.a.item},u.a.createElement(p.b,{to:"/profile/22956",className:function(e){return e.isActive?pe.a.active:pe.a.item}},"Profile")),u.a.createElement("div",{className:"".concat(pe.a.item," ").concat(pe.a.active)},u.a.createElement(p.b,{to:"/dialogs",className:function(e){return e.isActive?pe.a.active:pe.a.item}},"Messages")),u.a.createElement("div",{className:pe.a.item},u.a.createElement(p.b,{to:"/news",className:function(e){return e.isActive?pe.a.active:pe.a.item}},"News")),u.a.createElement("div",{className:pe.a.item},u.a.createElement(p.b,{to:"/music",className:function(e){return e.isActive?pe.a.active:pe.a.item}},"Music")),u.a.createElement("div",{className:pe.a.item},u.a.createElement(p.b,{to:"/users",className:function(e){return e.isActive?pe.a.active:pe.a.item}},"Users")),u.a.createElement("div",{className:pe.a.item},u.a.createElement(p.b,{to:"/settings",className:function(e){return e.isActive?pe.a.active:pe.a.item}},"Settings")))},be=function(e){var t=Object(y.d)((function(e){return e.profilePage.myPhoto})),a=Object(y.d)((function(e){return e.auth.login}));return u.a.createElement("header",{className:fe.a.header},u.a.createElement("div",{className:fe.a.container},u.a.createElement(de,null),e.isAuth?u.a.createElement("div",{className:fe.a.wrapper},u.a.createElement("div",{className:fe.a.loginBlock},u.a.createElement("img",{className:fe.a.avatar,src:t||P.a,alt:"ava"}),u.a.createElement("div",{className:fe.a.userName}," ",a)),u.a.createElement("div",{className:fe.a.logout,onClick:e.logout},"Logout")):u.a.createElement(p.b,{to:"/Login"},"Login")))},Ee={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null,currentCaptchaValue:null},he=function(e,t,a,n){return{type:"auth/SET_USER_DATA",userId:e,email:t,login:a,isAuth:n}},ve=function(){return function(){var e=Object(F.a)(L.a.mark((function e(t){var a,n,r,c,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.me();case 2:if(0!==(a=e.sent).data.resultCode){e.next=8;break}return n=a.data.data,r=n.id,c=n.email,o=n.login,t(he(r,c,o,!0)),e.next=8,t(J(r));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ge=function(){return function(){var e=Object(F.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.logout();case 2:0===e.sent.data.resultCode&&t(he(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Oe=function(){return function(){var e=Object(F.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.c.getCaptchaUrl();case 2:a=e.sent,t({type:"auth/GET_CAPTCHA_URL_SUCCESS",captchaUrl:a.data.url});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_e=function(e){Object(l.a)(a,e);var t=Object(f.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return u.a.createElement(be,this.props)}}]),a}(u.a.Component),je=Object(y.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:ge})(_e),Pe=a(74),Se=a.n(Pe),we=Object(w.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.error,n=Object(y.c)(),r=Object(y.d)((function(e){return e.auth.captchaUrl}));return u.a.createElement("form",{onSubmit:t},Object(S.c)("Email","email",[Q.c],S.a),Object(S.c)("Password","password",[Q.c],S.a,{type:"password"}),Object(S.c)(null,"rememberMe",[],S.a,{type:"checkbox"},"remember me"),r&&u.a.createElement("img",{src:r,alt:"captcha"}),r&&u.a.createElement("div",null,u.a.createElement("input",{type:"text",onChange:function(e){n({type:"auth/SET_CAPTCHA_URL",currentCaptchaValue:e.currentTarget.value})},placeholder:"symbols from image"})),a&&u.a.createElement("div",{className:k.a.formSummaryError},a),u.a.createElement("div",{className:Se.a.button},u.a.createElement(T.a,{name:"Login"})))})),ye=Object(y.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,a){return function(){var n=Object(F.a)(L.a.mark((function n(r,c){var o,u,s;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=c().auth.currentCaptchaValue,n.next=3,D.a.login(e,t,a,o);case 3:if(0!==(u=n.sent).data.resultCode){n.next=9;break}return n.next=7,r(ve());case 7:n.next=14;break;case 9:if(10!==u.data.resultCode){n.next=12;break}return n.next=12,r(Oe());case 12:s=u.data.messages.length>0?u.data.messages[0]:"Some error",r(Object(H.a)("login",{_error:s}));case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},logout:ge})((function(e){var t=Object(y.d)((function(e){return e.auth.userId}));return e.isAuth?u.a.createElement(m.a,{to:"/profile/".concat(t)}):u.a.createElement("div",{className:Se.a.wrapper},u.a.createElement("h1",null,"LOGIN"),u.a.createElement(we,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}}),u.a.createElement("div",{className:Se.a.description},u.a.createElement("h3",null,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430:"),u.a.createElement("div",null,"Email: free@samuraijs.com"),u.a.createElement("div",null,"Password: free")))})),Ne={initialized:!1},ke=a(126),Ce=a(129),Te=a(136),Ae=a(128),xe=Object(ue.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(G.a)(Object(G.a)({},e),{},{posts:[{id:Object(R.a)(),message:t.newPostText,likesCount:0}].concat(Object(M.a)(e.posts))});case"profile/DELETE-POST":return Object(G.a)(Object(G.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.id}))});case"profile/SET_USER_PROFILE":return Object(G.a)(Object(G.a)({},e),{},{profile:t.profile});case"profile/SET_STATUS":return Object(G.a)(Object(G.a)({},e),{},{status:t.status});case"profile/SAVE_PHOTO_SUCCESS":return e.profile?Object(G.a)(Object(G.a)({},e),{},{profile:Object(G.a)(Object(G.a)({},e.profile),{},{photos:t.photos})}):e;case"profile/SET_MY_PHOTO":return Object(G.a)(Object(G.a)({},e),{},{myPhoto:t.photos});default:return e}},dialogsPage:ke.b,usersPage:Ce.f,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":return Object(G.a)(Object(G.a)(Object(G.a)({},e),t),{},{isAuth:t.isAuth});case"auth/GET_CAPTCHA_URL_SUCCESS":return Object(G.a)(Object(G.a)({},e),{},{captchaUrl:t.captchaUrl});case"auth/SET_CAPTCHA_URL":return Object(G.a)(Object(G.a)({},e),{},{currentCaptchaValue:t.currentCaptchaValue});default:return e}},form:Ae.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/INITIALIZED_SUCCESS":return Object(G.a)(Object(G.a)({},e),{},{initialized:!0});default:return e}}}),Ie=Object(ue.e)(xe,Object(ue.a)(Te.a));window.store=Ie;var Ue=u.a.lazy((function(){return a.e(4).then(a.bind(null,299))})),Le=u.a.lazy((function(){return a.e(3).then(a.bind(null,300))})),Fe=function(e){Object(l.a)(a,e);var t=Object(f.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?u.a.createElement("div",{className:"App"},u.a.createElement(je,null),u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"wrapper"},u.a.createElement(u.a.Suspense,{fallback:u.a.createElement(O.a,null)},u.a.createElement(m.d,null,u.a.createElement(m.b,{path:"/dialogs/*",element:u.a.createElement(Ue,null)}),u.a.createElement(m.b,{path:"/",element:u.a.createElement(m.a,{to:"/login"})}),u.a.createElement(m.b,{path:"/profile/:userId",element:u.a.createElement(ie,null)}),u.a.createElement(m.b,{path:"/profile",element:u.a.createElement(ie,null)}),u.a.createElement(m.b,{path:"/news/*",element:u.a.createElement(d,null)}),u.a.createElement(m.b,{path:"/music/*",element:u.a.createElement(b,null)}),u.a.createElement(m.b,{path:"/users/*",element:u.a.createElement(Le,null)}),u.a.createElement(m.b,{path:"/settings/*",element:u.a.createElement(E,null)}),u.a.createElement(m.b,{path:"/login/*",element:u.a.createElement(ye,null)}),u.a.createElement(m.b,{path:"*",element:u.a.createElement("div",null,"404 NOT FOUND")})))))):u.a.createElement(O.a,null)}}]),a}(u.a.Component),Me=Object(y.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(){var e=Object(F.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(ve());case 2:t({type:"app/INITIALIZED_SUCCESS"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Fe),Ge=function(){return u.a.createElement(p.a,null,u.a.createElement(y.a,{store:Ie},u.a.createElement(Me,null)))};c.a.render(u.a.createElement(Ge,null),document.getElementById("root")),n()},33:function(e,t,a){e.exports={formControl:"FormsControls_formControl__3ggK0",error:"FormsControls_error__2drFG",formSummaryError:"FormsControls_formSummaryError__3SPCO"}},34:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c}));var n=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},c=function(e){return function(t){if(t.length<=e)return"Need more symbols"}}},38:function(e,t,a){e.exports=a.p+"static/media/user.c66e5219.jpg"},39:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(55),r=a(0),c=a.n(r),o=a(94),u=a.n(o),s=["red","className","name"],i=function(e){var t=e.red,a=e.className,r=e.name,o=Object(n.a)(e,s),i="".concat(u.a.default," ").concat(t?u.a.red:""," ").concat(a||"");return c.a.createElement("button",Object.assign({className:i},o),r)}},48:function(e,t,a){e.exports={container:"Post_container__xXhKd",header:"Post_header__2W4au",avatar:"Post_avatar__1A63u",main:"Post_main__32Ris",footer:"Post_footer__3g4AJ"}},52:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n),c=a(130),o=a.n(c),u=a(131),s=a.n(u),i=function(){return r.a.createElement("div",{className:s.a.wrapper},r.a.createElement("img",{src:o.a,alt:"Fetching"}))}},60:function(e,t,a){e.exports={postBlock:"MyPosts_postBlock__1-3Tk",posts:"MyPosts_posts__3HAPL",formWrapper:"MyPosts_formWrapper__28GqI",button:"MyPosts_button__1C0p6"}},74:function(e,t,a){e.exports={description:"Login_description__3iGlY",button:"Login_button__2grPY",wrapper:"Login_wrapper__2KcOS"}},94:function(e,t,a){e.exports={default:"Button_default__203eR",red:"Button_red__5vBG4"}}},[[163,1,2]]]);
//# sourceMappingURL=main.109b0126.chunk.js.map